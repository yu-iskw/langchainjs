
> test-custom-labels@1.0.0 test:gemini
> node tests/test-gemini-labels.js --debug

ğŸš€ Testing Gemini API Custom Metadata Labels

ğŸ” [DEBUG] Running in debug mode - will show detailed logging

ğŸ“‹ Test 1: Labels on model initialization
ğŸ” [DEBUG] Test 1 - Creating Gemini model with labels: {
  team: 'research',
  component: 'frontend',
  environment: 'production',
  test_type: 'model_init',
  platform: 'gemini_api'
}
ğŸ” [DEBUG] Model created. Checking properties:
ğŸ” [DEBUG] - Model labels property: undefined
ğŸ” [DEBUG] - Model model: gemini-2.5-flash
ğŸ” [DEBUG] - Model constructor name: ChatGoogleGenerativeAI
ğŸ” [DEBUG] Test 1 - About to invoke Gemini with labels: {
  team: 'research',
  component: 'frontend',
  environment: 'production',
  test_type: 'model_init',
  platform: 'gemini_api'
}
âœ… Response: Labels working on Gemini API
âœ… Labels were included in the request

ğŸ“‹ Test 2: Labels via invoke options
ğŸ” [DEBUG] Test 2 - About to invoke Gemini with labels via options: {
  session: 'test-session-456',
  user: 'test-user-gemini',
  request_type: 'invoke_options',
  priority: 'high',
  platform: 'gemini_api'
}
âœ… Response: Labels via invoke options working on Gemini
âœ… Labels were included via invoke options

ğŸ“‹ Test 3: Labels override behavior
âœ… Response: Labels override working on Gemini
âœ… Invoke options labels override model labels

ğŸ“‹ Test 4: No labels (edge case)
âœ… Response: No labels test working on Gemini
âœ… Request completed without labels

ğŸ“‹ Test 5: Empty labels object (edge case)
âœ… Response: Empty labels test working on Gemini
âœ… Request completed with empty labels object

ğŸ“‹ Test 6: Complex labels with special characters
âœ… Response: Complex labels test working on Gemini
âœ… Complex labels with special characters working

ğŸ“‹ Test 7: Different Gemini models
âœ… Response: Gemini Pro model test working

âœ… Different Gemini model working with labels

ğŸ‰ All Gemini API label tests completed successfully!
ğŸ“Š Summary:
   - Labels on model initialization: âœ…
   - Labels via invoke options: âœ…
   - Labels override behavior: âœ…
   - No labels edge case: âœ…
   - Empty labels edge case: âœ…
   - Complex labels: âœ…
   - Different models: âœ…
